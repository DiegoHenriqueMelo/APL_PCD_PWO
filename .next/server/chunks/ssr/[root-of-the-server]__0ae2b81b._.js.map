{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/src/contexts/AuthContext.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\n\r\n// Tipos de usuário\r\nexport type UserType = 'candidate' | 'company' | 'admin' | null;\r\n\r\nexport interface CandidateUser {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  cpf: string;\r\n  phone: string;\r\n  birth_date: string;\r\n  tipo: 'candidate';\r\n  subtipo?: string; // Subtipo de deficiência do candidato (deprecado)\r\n  deficiencia?: string; // ID da deficiência (ex: \"DMOTO-305079\") - usado para filtrar vagas\r\n}\r\n\r\nexport interface CompanyUser {\r\n  id: string;\r\n  trade_name: string;\r\n  company_name: string;\r\n  email: string;\r\n  cnpj: string;\r\n  phone: string;\r\n  tipo: 'company';\r\n}\r\n\r\nexport interface AdminUser {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  tipo: 'admin';\r\n}\r\n\r\nexport type User = CandidateUser | CompanyUser | AdminUser | null;\r\n\r\ninterface AuthContextData {\r\n  user: User;\r\n  userType: UserType;\r\n  token: string | null;\r\n  isLoading: boolean;\r\n  isAuthenticated: boolean;\r\n  login: (userData: User, token: string, type: UserType) => void;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextData>({} as AuthContextData);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User>(null);\r\n  const [userType, setUserType] = useState<UserType>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Carregar dados do localStorage ao iniciar\r\n  useEffect(() => {\r\n    const loadStorageData = () => {\r\n      try {\r\n        const storedToken = localStorage.getItem('@PCDentro:token');\r\n        const storedUser = localStorage.getItem('@PCDentro:user');\r\n        const storedUserType = localStorage.getItem('@PCDentro:userType');\r\n\r\n        if (storedToken && storedUser && storedUserType) {\r\n          setToken(storedToken);\r\n          setUser(JSON.parse(storedUser));\r\n          setUserType(storedUserType as UserType);\r\n        }\r\n      } catch (error) {\r\n        console.error('Erro ao carregar dados do storage:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadStorageData();\r\n  }, []);\r\n\r\n  const login = (userData: User, authToken: string, type: UserType) => {\r\n    setUser(userData);\r\n    setToken(authToken);\r\n    setUserType(type);\r\n\r\n    // Salvar no localStorage\r\n    localStorage.setItem('@PCDentro:token', authToken);\r\n    localStorage.setItem('@PCDentro:user', JSON.stringify(userData));\r\n    if (type) {\r\n      localStorage.setItem('@PCDentro:userType', type);\r\n    }\r\n    \r\n    // Set token and role cookies so middleware can validate access to protected routes\r\n    try {\r\n      if (type) {\r\n        // cookie expires in 7 days\r\n        const expires = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toUTCString();\r\n        document.cookie = `pcd_token=${authToken}; path=/; expires=${expires}`;\r\n        document.cookie = `pcd_role=${type}; path=/; expires=${expires}`;\r\n      }\r\n    } catch (e) {\r\n      // noop if cookies can't be set (SSR contexts)\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setToken(null);\r\n    setUserType(null);\r\n\r\n    // Limpar localStorage\r\n    localStorage.removeItem('@PCDentro:token');\r\n    localStorage.removeItem('@PCDentro:user');\r\n    localStorage.removeItem('@PCDentro:userType');\r\n    try {\r\n      // clear cookies\r\n      document.cookie = 'pcd_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\r\n      document.cookie = 'pcd_role=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';\r\n    } catch (e) {\r\n      // noop\r\n    }\r\n  };\r\n\r\n  const isAuthenticated = !!user && !!token;\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        userType,\r\n        token,\r\n        isLoading,\r\n        isAuthenticated,\r\n        login,\r\n        logout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n\r\n  if (!context) {\r\n    throw new Error('useAuth deve ser usado dentro de um AuthProvider');\r\n  }\r\n\r\n  return context;\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,sFCA9B,EAAA,EAAA,CAAA,CAAA,OA8CA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,EAAkB,CAAC,GAE7C,SAAS,EAAa,UAAE,CAAQ,CAA2B,EAChE,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAO,MACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,MAC7C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SAG3C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAEN,GAAI,CACF,IAAM,EAAc,aAAa,OAAO,CAAC,mBACnC,EAAa,aAAa,OAAO,CAAC,kBAClC,EAAiB,aAAa,OAAO,CAAC,sBAExC,GAAe,GAAc,IAC/B,EAAS,GACT,EAAQ,KAFuC,AAElC,KAAK,CAAC,IACnB,EAAY,GAEhB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,qCAAsC,EACtD,QAAU,CACR,GAAa,EACf,CAIJ,EAAG,EAAE,EAgDH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAY,QAAQ,CAAA,CACnB,MAAO,CACL,gBACA,QACA,YACA,EACA,gBATkB,CAAC,CAAC,GAAQ,CAAC,CAAC,EAU9B,MArDQ,CAAC,EAAgB,EAAmB,KAChD,EAAQ,GACR,EAAS,GACT,EAAY,GAGZ,aAAa,OAAO,CAAC,kBAAmB,GACxC,aAAa,OAAO,CAAC,iBAAkB,KAAK,SAAS,CAAC,IAClD,GACF,GADQ,UACK,OAAO,CAAC,qBAAsB,GAI7C,GAAI,CACF,GAAI,EAAM,CAER,IAAM,EAAU,IAAI,KAAK,KAAK,GAAG,GAAK,IAAI,IAAqB,CAAhB,KAAK,KAAsB,AAAjB,GACzD,SAAS,MAAM,CAAG,CAAC,UAAU,EAAE,EAAU,kBAAkB,EAAE,EAAA,CAAS,CACtE,SAAS,MAAM,CAAG,CAAC,SAAS,EAAE,EAAK,kBAAkB,EAAE,EAAA,CAAS,AAClE,CACF,CAAE,MAAO,EAAG,CAEZ,CACF,EA+BM,OA7BS,KACb,EAAQ,MACR,EAAS,MACT,EAAY,MAGZ,aAAa,UAAU,CAAC,mBACxB,aAAa,UAAU,CAAC,kBACxB,aAAa,UAAU,CAAC,sBACxB,GAAI,CAEF,SAAS,MAAM,CAAG,4DAClB,SAAS,MAAM,CAAG,0DACpB,CAAE,MAAO,EAAG,CAEZ,CACF,CAcI,WAEC,GAGP,CAEO,SAAS,IACd,IAAM,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAE3B,GAAI,CAAC,EACH,MAAM,AAAI,CADE,KACI,oDAGlB,OAAO,CACT","ignoreList":[0,1,2]}