(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,s)=>{a.exports=e.r(76562)},68550,e=>{"use strict";function a(){let e=localStorage.getItem("@PCDentro:token"),a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(e)),a}e.s(["getAuthHeaders",()=>a])},42784,e=>{"use strict";e.s(["default",()=>i],42784);var a=e.i(43476),s=e.i(71645),t=e.i(68550);let r=async e=>{try{console.log("[getVagasByCandidate] iniciando requisição para candidateId:",e);let a=(0,t.getAuthHeaders)();console.log("[getVagasByCandidate] headers:",a);let s="http://localhost:3001/get/vagas/byCandidato/".concat(e);console.log("[getVagasByCandidate] fetch ->",s);let r=await fetch(s,{method:"GET",headers:a});console.log("[getVagasByCandidate] status:",r.status);let d=await r.text();try{let e=JSON.parse(d);if(console.log("[getVagasByCandidate] data:",e),!r.ok)throw Error("HTTP error! status: ".concat(r.status," - ").concat(d));return e}catch(e){if(console.warn("[getVagasByCandidate] resposta não-JSON:",d),!r.ok)throw Error("HTTP error! status: ".concat(r.status," - ").concat(d));return d}}catch(e){throw console.error("[getVagasByCandidate] Erro ao buscar vagas por candidato:",e),e}};var d=e.i(18566),l=e.i(57951);function i(){let e=(0,d.useRouter)(),{user:t,isAuthenticated:i,userType:n,isLoading:o,logout:c}=(0,l.useAuth)(),[x,m]=(0,s.useState)([]),[g,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{o||i||e.push("/login")},[i,o,e]);let y=async()=>{if("candidate"===n&&t)try{h(!0),console.log("[perfil] carregando candidaturas para user.id=",t.id);let e=await r(t.id);console.log("[perfil] resposta do getVagasByCandidate:",e);let a=[];a=Array.isArray(e)?e:e&&Array.isArray(e.data)?e.data:e&&e.message&&Array.isArray(e.message)?e.message:e&&e.message&&e.message.data&&Array.isArray(e.message.data)?e.message.data:[],m(a)}catch(e){console.error("Erro ao carregar candidaturas:",e),alert("Erro ao carregar candidaturas. Veja console para detalhes."),m([])}finally{h(!1)}},u=async()=>{b||0!==x.length||await y(),p(e=>!e)};if(!i||o)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});let j="candidate"===n?"#7BB7EB":"#ECAE7D";return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br ".concat("candidate"===n?"from-blue-50":"from-orange-50"," via-gray-50 ").concat("candidate"===n?"to-sky-50":"to-amber-50"),children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("a",{href:"/",className:"flex items-center space-x-2 hover:opacity-80 transition",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:j},children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"PC"})}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"PCDentro"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("candidate"===n?"/vaga":"/vaga/create"),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition",children:"Início"}),(0,a.jsx)("button",{onClick:()=>{c(),e.push("/login")},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-medium transition",children:"Sair"})]})]})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"px-8 py-10",style:{background:"linear-gradient(135deg, ".concat(j," 0%, #52606B 100%)")},children:(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-white flex items-center justify-center text-4xl font-bold",style:{color:j},children:"candidate"===n&&t&&"name"in t?t.name.charAt(0).toUpperCase():"company"===n&&t&&"trade_name"in t?t.trade_name.charAt(0).toUpperCase():"U"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"candidate"===n&&t&&"name"in t?t.name:"company"===n&&t&&"trade_name"in t?t.trade_name:"Usuário"}),(0,a.jsx)("p",{className:"text-white opacity-90 text-lg",children:"candidate"===n?"Candidato":"Empresa"})]}),(0,a.jsx)("button",{onClick:()=>e.push("/mudar-senha"),className:"px-6 py-3 bg-white rounded-lg font-semibold hover:opacity-90 transition shadow-lg",style:{color:j},children:"Alterar Senha"})]})}),"candidate"===n&&t&&"name"in t&&(0,a.jsxs)("div",{className:"p-8 md:p-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Informações Pessoais"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nome Completo"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.name})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.email})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CPF"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:"cpf"in t?t.cpf:"-"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telefone"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:"phone"in t?t.phone:"-"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Data de Nascimento"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:"birth_date"in t?new Date(t.birth_date).toLocaleDateString("pt-BR"):"-"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID do Usuário"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900 font-mono text-sm",children:t.id})})]})]})]}),"candidate"===n&&b&&(0,a.jsxs)("div",{className:"p-8 md:p-10 border-t border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Minhas Candidaturas"}),g?(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"mt-3 text-gray-600",children:"Carregando candidaturas..."})]}):0===x.length?(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Você ainda não se candidatou a nenhuma vaga."})}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:x.map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.titulo||e.vaga_titulo||"Vaga"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.nome_fantasia||e.empresa||""}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Publicada: ",e.data_inicio?new Date(e.data_inicio).toLocaleDateString("pt-BR"):"-"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Até: ",e.data_fim?new Date(e.data_fim).toLocaleDateString("pt-BR"):"-"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,a.jsx)("p",{children:e.status?"Candidatura ativa":"Candidatura processada"})})]},e.id&&e.id!==(null==t?void 0:t.id)?e.id:"cand-".concat(s)))})]}),"company"===n&&t&&"trade_name"in t&&(0,a.jsxs)("div",{className:"p-8 md:p-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Informações da Empresa"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nome Fantasia"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.trade_name})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Razão Social"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.company_name})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.email})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CNPJ"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.cnpj})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telefone"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900",children:t.phone})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ID da Empresa"}),(0,a.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,a.jsx)("p",{className:"text-gray-900 font-mono text-sm",children:t.id})})]})]})]}),(0,a.jsx)("div",{className:"px-8 pb-8 md:px-10 md:pb-10",children:(0,a.jsxs)("div",{className:"pt-6 border-t border-gray-200 flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/mudar-senha"),className:"px-6 py-3 border-2 rounded-lg font-semibold hover:opacity-80 transition",style:{borderColor:j,color:j},children:"Alterar Senha"}),(0,a.jsx)("button",{onClick:()=>e.push("/perfil/editar"),className:"px-6 py-3 border-2 rounded-lg font-semibold hover:opacity-80 transition",style:{borderColor:j,color:j},children:"Editar Perfil"}),"company"===n&&(0,a.jsx)("button",{onClick:()=>e.push("/minhas-vagas"),className:"px-6 py-3 text-white rounded-lg font-semibold hover:opacity-90 transition shadow-lg",style:{backgroundColor:j},children:"Minhas Vagas"}),"candidate"===n&&(0,a.jsx)("button",{onClick:u,className:"px-6 py-3 text-white rounded-lg font-semibold hover:opacity-90 transition shadow-lg",style:{backgroundColor:j},children:"Minhas Candidaturas"}),(0,a.jsx)("button",{onClick:()=>e.push("candidate"===n?"/vaga":"/vaga/create"),className:"px-6 py-3 text-white rounded-lg font-semibold hover:opacity-90 transition shadow-lg",style:{backgroundColor:j},children:"candidate"===n?"Ver Vagas":"Criar Vaga"})]})})]})})]})}}]);